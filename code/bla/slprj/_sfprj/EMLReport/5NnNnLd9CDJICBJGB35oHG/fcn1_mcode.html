<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type0" id="S2T0U3">RW_torq</span> = fcn(<span class="var type1" id="S3T1U6">RW_speeds</span>,<span class="var type1" id="S4T2U7">RW_acc</span>,<span class="var type1" id="S5T2U8">Iwheel</span>,<span class="var type1" id="S6T3U9">omega</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%For Normal arrangement(not the tetrahedron one)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%RW_acc means acceleration of 4 individual wheel speeds</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,5" id="srcline5"> 5</a></span><span class="line"><span class="var type0" id="S7T0U12">Torq_acceleration_part</span>=<span class="var type1" id="S5T2U14">Iwheel</span>*[  <span class="var type1" id="S4T2U19">RW_acc</span>(1)-<span class="mxinfo " id="T2:U7"><span class="mxinfo " id="T2:U8">1</span>/<span class="mxinfo " id="T2:U9">sqrt(3)</span></span>*<span class="var type1" id="S4T2U28">RW_acc</span>(<span class="mxinfo " id="T2:U11"><span class="message error" id="M1F1C">4</span></span>);</span></span>
<span class="srcline"><span class="lineno"><a href="1,6" id="srcline6"> 6</a></span><span class="line">                            <span class="var type0" id="S4T0U33">RW_acc</span>(2)-1/sqrt(3)*<span class="var type0" id="S4T0U42">RW_acc</span>(4);</span></span>
<span class="srcline"><span class="lineno"><a href="1,7" id="srcline7"> 7</a></span><span class="line">                            <span class="var type0" id="S4T0U47">RW_acc</span>(3)-1/sqrt(3)*<span class="var type0" id="S4T0U56">RW_acc</span>(4)  ];</span></span>
<span class="srcline"><span class="lineno"><a href="1,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T3:U12"><span class="var type1" id="S9T3U60">Torq_gyroscopic_part</span>=<span class="mxinfo " id="T3:U14"><span class="var type1" id="S5T2U62">Iwheel</span>*<span class="mxinfo " id="T3:U16">[ <span class="mxinfo " id="T2:U17"><span class="mxinfo " id="T2:U18"><span class="mxinfo " id="T2:U19"><span class="var type1" id="S3T1U68">RW_speeds</span>(<span class="mxinfo " id="T4:U21">3</span>)</span>*<span class="mxinfo " id="T2:U22"><span class="var type1" id="S6T3U71">omega</span>(<span class="mxinfo " id="T2:U24">2</span>)</span></span>- <span class="mxinfo " id="T2:U25"><span class="mxinfo " id="T2:U26"><span class="var type1" id="S3T1U75">RW_speeds</span>(<span class="mxinfo " id="T2:U28">2</span>)</span>*<span class="mxinfo " id="T2:U29"><span class="var type1" id="S6T3U78">omega</span>(<span class="mxinfo " id="T2:U31">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,9" id="srcline9"> 9</a></span><span class="line">                              <span class="mxinfo " id="T2:U32"><span class="mxinfo " id="T2:U33"><span class="mxinfo " id="T2:U34"><span class="var type1" id="S3T1U84">RW_speeds</span>(<span class="mxinfo " id="T4:U36">1</span>)</span>*<span class="mxinfo " id="T2:U37"><span class="var type1" id="S6T3U87">omega</span>(<span class="mxinfo " id="T2:U39">3</span>)</span></span>- <span class="mxinfo " id="T2:U40"><span class="mxinfo " id="T2:U41"><span class="var type1" id="S3T1U91">RW_speeds</span>(<span class="mxinfo " id="T2:U43">3</span>)</span>*<span class="mxinfo " id="T2:U44"><span class="var type1" id="S6T3U94">omega</span>(<span class="mxinfo " id="T2:U46">1</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,10" id="srcline10">10</a></span><span class="line">                              <span class="mxinfo " id="T2:U47"><span class="mxinfo " id="T2:U48"><span class="mxinfo " id="T2:U49"><span class="var type1" id="S3T1U100">RW_speeds</span>(<span class="mxinfo " id="T4:U51">2</span>)</span>*<span class="mxinfo " id="T2:U52"><span class="var type1" id="S6T3U103">omega</span>(<span class="mxinfo " id="T2:U54">1</span>)</span></span>- <span class="mxinfo " id="T2:U55"><span class="mxinfo " id="T2:U56"><span class="var type1" id="S3T1U107">RW_speeds</span>(<span class="mxinfo " id="T2:U58">1</span>)</span>*<span class="mxinfo " id="T2:U59"><span class="var type1" id="S6T3U110">omega</span>(<span class="mxinfo " id="T2:U61">2</span>)</span></span></span>]</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,11" id="srcline11">11</a></span><span class="line"><span class="var type0" id="S2T0U114">RW_torq</span>=<span class="var type0" id="S7T0U116"><span class="message error" id="M2F1C">Torq_acceleration_part</span></span>+<span class="var type0" id="S9T0U117">Torq_gyroscopic_part</span>;<span class="comment">%gyroscopic part is actually undesired but still present                            </span></span></span>
<span class="srcline"><span class="lineno"><a href="1,12" id="srcline12">12</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
